import{j as s,z as p,A as h,c as u,B as b,r as i,u as f,a as N,m as T,C as g}from"./index-5wTMoCu5.js";const v=({tweet:a,user:o})=>s.jsx("div",{children:s.jsxs("div",{className:"flex mt-5",children:[s.jsx("img",{className:"w-[3.5vw] h-[3.5vw] rounded-full",src:a==null?void 0:a.profilePicture,alt:""}),s.jsxs("div",{className:"ml-2",children:[s.jsxs("span",{className:"mr-6 font-semibold",children:["@",a==null?void 0:a.username]}),s.jsx("span",{className:"text-purple-200",children:a==null?void 0:a.ago}),s.jsx("p",{className:"mt-2 w-[60vw] ml-4",children:a==null?void 0:a.content}),s.jsx("div",{className:"mt-2",children:s.jsxs("button",{className:"flex items-center ml-4",children:[s.jsx(p,{className:"mr-4"}),a==null?void 0:a.likesCount]})})]})]})}),y=async(a,o)=>{try{const r=await u.get(`${h}/user/${o}`,{withCredentials:!0});if(r)return a(b(r.data.data)),r}catch(r){console.log(r)}},S=()=>{var t;const[a,o]=i.useState(!1),[r,d]=i.useState(""),x=f(),{user:n,userTweets:l}=N(e=>e.user),j=async e=>{var m;e.preventDefault();try{const c=await u.post(`${h}`,{content:r},{withCredentials:!0});(m=c==null?void 0:c.data)!=null&&m.data&&(d(""),o(!0))}catch(c){console.error("Error adding tweet:",c)}};return i.useEffect(()=>{n&&!l&&y(x,n==null?void 0:n._id)},[n,l,a]),a?s.jsx(T,{}):s.jsxs("div",{children:[s.jsxs("form",{onSubmit:j,action:"",className:"mb-3 border border-t-0 border-l-0 border-r-0 py-3",children:[s.jsx("textarea",{className:"bg-transparent border",placeholder:"Write something",value:r,onChange:e=>d(e.target.value),name:"content",id:"",cols:"60",rows:"2"}),s.jsx("button",{type:"submit",children:"Tweet"})]}),((t=l==null?void 0:l.userTweets)==null?void 0:t.length)>0?l.userTweets.map(e=>s.jsx("div",{className:"border border-l-0 border-r-0 border-t-0 pb-4",children:s.jsx(v,{tweet:e,user:n})},e==null?void 0:e._id)):s.jsxs("div",{className:"flex flex-col items-center w-full mt-5",children:[s.jsx(g,{size:50}),s.jsx("h1",{className:"font-bold",children:"No Tweets"}),s.jsx("p",{className:"font-semibold",children:"This channel has yet to make a Tweet."})]})]})};export{S as default};
