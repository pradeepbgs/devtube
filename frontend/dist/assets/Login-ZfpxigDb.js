import{r as a,u as S,e as L,j as e,L as E,f as h,c as y,l as P}from"./index-5wTMoCu5.js";const q=()=>{const[d,i]=a.useState(""),[o,c]=a.useState(""),[u,b]=a.useState(""),[l,g]=a.useState(!1),[x,f]=a.useState(""),[k,m]=a.useState(!1),w=S(),j=L(),N=async t=>{var r,n;t.preventDefault();try{const s=await y.post(`${h}/login`,{email:o,password:u},{withCredentials:!0}),{user:p}=s.data.data;localStorage.setItem("user",JSON.stringify(p)),j("/"),w(P(p))}catch(s){i((n=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:n.message)}},v=async t=>{var r,n;m(!0),t.preventDefault();try{await y.post(`${h}/request-password-reset `,{email:o}),f("Password reset link sent to your email."),i("")}catch(s){i((n=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:n.message)}finally{m(!1)}};return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl shadow-xl w-full max-w-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-white text-center mb-6",children:l?"Forgot Password":"Login"}),d&&e.jsx("p",{className:"text-red-500 text-center mb-4",children:d}),x&&e.jsx("p",{className:"text-green-500 text-center mb-4",children:x}),l?e.jsxs("form",{onSubmit:v,className:"flex flex-col gap-4",children:[e.jsx("input",{className:"bg-gray-700 px-4 py-3 rounded-md text-white",type:"email",required:!0,placeholder:"Enter your email",value:o,onChange:t=>c(t.target.value)}),e.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 transition-all px-4 py-3 rounded-md text-white font-semibold",children:"Send Reset Link"}),e.jsx("button",{type:"submit",onClick:()=>g(!1),className:"text-indigo-400 hover:underline text-center",children:"Back to Login"})]}):e.jsxs("form",{onSubmit:N,className:"flex flex-col gap-4",children:[e.jsx("input",{className:"bg-gray-700 px-4 py-3 rounded-md text-white",type:"email",required:!0,placeholder:"Enter your email",value:o,onChange:t=>c(t.target.value)}),e.jsx("input",{className:"bg-gray-700 px-4 py-3 rounded-md text-white",type:"password",required:!0,placeholder:"Enter your password",value:u,onChange:t=>b(t.target.value)}),e.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 transition-all px-4 py-3 rounded-md text-white font-semibold",children:"Login"})]}),!l&&e.jsx("div",{className:"text-gray-300 text-center mt-4",children:e.jsx("button",{onClick:()=>g(!0),className:"text-indigo-400 hover:underline",children:"Forgot Password?"})}),e.jsxs("p",{className:"text-gray-300 text-center mt-4",children:["Not a member yet?"," ",e.jsx(E,{to:"/signup",className:"text-indigo-400 hover:underline",children:"Sign up"})]})]})})};export{q as default};
